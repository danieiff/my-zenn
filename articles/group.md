---
title: "vte.cxã®ã‚°ãƒ«ãƒ¼ãƒ—æ¨©é™"
emoji: "ğŸˆ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [vtecx]
published: false
---
ã‚°ãƒ«ãƒ¼ãƒ—ã®ç›®çš„ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ¨©é™ã‚’ã‚°ãƒ«ãƒ¼ãƒ—ä¸€æ‹¬ã§ç®¡ç†ã™ã‚‹ã“ã¨ã§ã™ã€‚
ãƒ¦ãƒ¼ã‚¶ãŒã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½œã‚Šã€åˆ¥ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãã“ã¸å‚åŠ ã™ã‚‹ã¾ã§ã€‚

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œã‚‹
adminæ¨©é™ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆ `vtecxapi.addusersByAdmin()` ã§ãã‚‹

### ã‚°ãƒ«ãƒ¼ãƒ—ä½œæˆ
1. ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒªã‚½ãƒ¼ã‚¹ä¸Šã«ã‚·ã‚¹ãƒ†ãƒ ãƒ•ã‚©ãƒ«ãƒ€ä»¥å¤–ã®ä»»æ„ã®ãƒ•ã‚©ãƒ«ãƒ€ã‚’ç”¨æ„ã—ã€ã“ã‚Œã‚’ã‚°ãƒ«ãƒ¼ãƒ—ã¨ã™ã‚‹
(1) ä½œæˆè€…(`UID:123`)ãŒæ¨©é™(`CRUD`)ã‚’æŒã¤ã€
(2) ã‚°ãƒ«ãƒ¼ãƒ—è‡ªä½“(`/groupS/group_123`)ãŒæ¨©é™(`CRUD`)ã‚’æŒã¤ã€
(3) ã‚°ãƒ«ãƒ¼ãƒ—(`/groupS/group_123`)ã‚’ä½œæˆã™ã‚‹
```ts
const group_creation_entry = {
  contributor: [
    { uri: 'urn:vte.cx:acl:123,CRUD' }, /*(1)*/
    { uri: 'urn:vte.cx:acl:/groupS/group_123,CRUD' } /*(2)*/
  ],
  link: [
    { ___rel: 'self', ___href: '/groupS/group_123' } /*(3)*/
  ]
}
```
2. ã‚°ãƒ«ãƒ¼ãƒ—ã«å¯¾ã—ã¦ (1)å‚åŠ ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ã‚’é…ä¸‹ã«ç™»éŒ² (2)ãã‚Œã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’ç™»éŒ²
- ä½œæˆè€…ã‚’ã‚°ãƒ«ãƒ¼ãƒ—é…ä¸‹ã«ç™»éŒ²ã€ã‚¨ã‚¤ãƒªã‚¢ã‚¹ç™»éŒ²
```ts
const signature_entry = {
  link: [
    { ___rel: 'self', ___href: '/groupS/group_123/123'},
    { ___rel: 'alternate', ___href: '/_user/123/group/group_123'}
  ]
}
```
ã‚°ãƒ«ãƒ¼ãƒ—ä½œæˆè€…ãŒä¸‹ã‚’`POST`ã™ã‚‹ã€‚ ã‚°ãƒ«ãƒ¼ãƒ—ã¯ä½œæˆã•ã‚Œã€ã‚°ãƒ«ãƒ¼ãƒ—ä½œæˆè€…ã¯ã“ã‚Œã«æ‰€å±ã—ã¾ã™
```ts
const feed = [ group_creation_entry, signature_entry ]
```

### ã‚°ãƒ«ãƒ¼ãƒ—æ‹›å¾…/å‚åŠ ç”³è«‹ã€€ã‚’é€ã‚‹
`UID:456`ã®ãƒ¦ãƒ¼ã‚¶ã‚’æ‹›å¾…ã—ã¾ã™
1. ã‚°ãƒ«ãƒ¼ãƒ—ã«å¯¾ã—ã¦æ¨©é™ã‚’æŒã¤ãƒ¦ãƒ¼ã‚¶(ä½œæˆè€…ãªã©)ãŒ[ã‚°ãƒ«ãƒ¼ãƒ—ä½œæˆã®æ‰‹é †2]ã‚’ãƒ¦ãƒ¼ã‚¶ã«å¯¾ã—ã¦å®Ÿè¡Œã—ã¾ã™
```ts
const signature_entry = {
  link: [
    { ___rel: 'self', ___href: '/groupS/group_123/456'},
    { ___rel: 'alternate', ___href: '/_user/456/group/group_123'}
  ]
}
```
2. ã‚°ãƒ«ãƒ¼ãƒ—ã«å¯¾ã—ã¦æ¨©é™ã‚’æŒã¤ãƒ¦ãƒ¼ã‚¶(ä½œæˆè€…ãªã©)ãŒã€€`PUT: /groupS/group_123/456?_signature`
`PUT: {signature_entry ã® self ã®URL}?_signature`ã€€ã®å½¢å¼

3. æ‹›å¾…ã‚’å—ã‘ã‚‹ãƒ¦ãƒ¼ã‚¶ãŒã€€`PUT: /_user/456/group/group_123`
`PUT: {signature_entry ã® alternate ã®URL}?_signature`ã€€ã®å½¢å¼

æ‰‹é †2ã¨3ã®å¾Œã€URLã®selfã¨alternateã®å¯¾å¿œãŒç¢ºèªã•ã‚Œã‚‹ã¨ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã‚°ãƒ«ãƒ¼ãƒ—ã«å‚åŠ ã•ã›ã‚‰ã‚Œã‚‹